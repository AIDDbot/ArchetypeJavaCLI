# F1.3 Configuration via environment variables Specification

Bind environment variables with sensible defaults (timeouts, log level, endpoints) using Spring configuration properties so runtime behavior can be adjusted without code changes.

- Epic: E1 CLI Scaffold and Runtime
- Priority: ❗ High
- Product Requirements:
  
- R3 Configuration via environment variables

## User Story 1

- As a developer/operator
- I want to configure network timeouts via environment variables
- So that I can tune reliability and performance without rebuilding

### Acceptance Criteria

- [ ] WHEN `CLI_NETWORK_CONNECT_TIMEOUT_MS` is set, the system SHALL bind it to `cli.network.connect-timeout-ms` with default `2000` when unset.
- [ ] WHEN `CLI_NETWORK_READ_TIMEOUT_MS` is set, the system SHALL bind it to `cli.network.read-timeout-ms` with default `2000` when unset.
- [ ] IF values are non-positive, THEN the system SHALL fail fast at startup with a clear validation message.

## User Story 2

- As a developer/operator
- I want to configure external endpoint base URLs via environment variables
- So that I can point the CLI to specific API environments

### Acceptance Criteria

- [ ] WHEN `CLI_ENDPOINTS_IP_GEO_BASE_URL` is set, the system SHALL bind it to `cli.endpoints.ip-geo-base-url` with default `http://ip-api.com/json`.
- [ ] WHEN `CLI_ENDPOINTS_OPEN_METEO_BASE_URL` is set, the system SHALL bind it to `cli.endpoints.open-meteo-base-url` with default `https://api.open-meteo.com/v1/forecast`.
- [ ] IF a base URL is invalid (not a valid URI), THEN the system SHALL fail fast at startup with a clear validation message.

## User Story 3

- As a developer
- I want the configuration to be strongly-typed and discoverable
- So that future features (HTTP client, endpoints) can consume it consistently

### Acceptance Criteria

- [ ] The system SHALL expose a `@ConfigurationProperties(prefix = "cli")` bean typed as `CliProperties`.
- [ ] WHERE configuration is not yet used, the system SHALL load and validate properties at startup without impacting runtime behavior.

> End of Feature Specification for F1.3, last updated 2025-08-28.
