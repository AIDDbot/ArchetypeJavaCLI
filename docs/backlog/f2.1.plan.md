---
description: 'Implementation Plan for F2.1 Reactive HTTP client with timeouts'
---

# Implementation Plan

## Overview

Provide a singleton WebClient bean configured with connect/read timeouts, default JSON headers, and versioned User-Agent. Leverage existing `CliProperties` for configuration.

## Context

- DOMAIN/SYSTEMS: Single Spring Boot + Spring Shell container; outbound HTTP via WebClient.
- Instructions: Architecture best practices apply; no DB.

## Tasks

- [ ] 1. Add WebClient configuration class
  - Create `src/main/java/com/aiddbot/archetype/cli/config/WebClientConfig.java`.
  - Define `@Configuration` class exposing `@Bean WebClient webClient(CliProperties props, ObjectProvider<BuildProperties> buildProps)`.
  - Build Reactor Netty `HttpClient` with connect and response timeout from `props.getNetwork()`.
  - Use `ReactorClientHttpConnector` and attach to `WebClient.Builder`.
  - Set default headers: `Accept: application/json`, `User-Agent: ArchetypeJavaCLI/<version or dev>`.

- [ ] 2. Wire version resolution helper
  - In `WebClientConfig`, resolve version via `BuildProperties` or fallback to `ArchetypeJavaCliApplication.resolveVersion` equivalent (inline minimal helper).
  - Keep helper private within config to avoid new public API.

- [ ] 3. Log effective configuration on startup
  - On bean creation, log connect/read timeouts and User-Agent value at INFO level.

- [ ] 4. Ensure component scan picks up configuration
  - Place `WebClientConfig` under `com.aiddbot.archetype.cli.config` (already scanned by `@SpringBootApplication`).

> End of Feature Implementation Tasks for F2.1, last updated 2025-08-28.
