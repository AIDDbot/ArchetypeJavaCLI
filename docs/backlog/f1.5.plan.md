# Implementation Plan

## Overview

Implement standardized exit codes and exception mapping for the CLI, with minimal changes to the existing bootstrap and no behavior change to Spring Shell interactive UX.

## Context

- DOMAIN.md, SYSTEMS.md
- /docs/backlog/f1.5.spec.md
- /docs/backlog/f1.5.design.md
- Java and Spring Boot instructions

## Tasks

- [x] 1. Add runtime exit code model types
  - Create package `com.aiddbot.archetype.cli.runtime`
  - Add `ExitCodes` enum with integer codes and getter
  - Add `CodedException` runtime exception holding an `ExitCodes`
- [x] 2. Add exception mapper
  - Add `ExitCodeExceptionMapper` interface
  - Add `DefaultExitCodeExceptionMapper` implementation with mapping rules
- [x] 3. Integrate mapping at application entrypoint
  - Wrap `SpringApplication.run` in try/catch
  - On failure, map exception to code, log concise message, and `System.exit(code)`
  - Preserve current startup/shutdown logs
- [x] 4. Wire as Spring bean for reuse (optional now)
  - Register `DefaultExitCodeExceptionMapper` as a `@Bean`
  - Future commands may inject and use it

> End of Feature Implementation Tasks for F1.5, last updated 2025-08-28.
