# F2.2 External endpoints configuration Specification

Configure external service base URLs for IP geolocation and weather APIs via environment-driven properties, with safe defaults and validation.

- **Epic**: E2 Networking and Integrations Foundation
- **Priority**: ‼️ Critical
- **Product Requirements**:
  - R3 Configuration via environment variables

## User Story 1

- **As a** CLI operator or deployer
- **I want to** configure the IP Geolocation and Open‑Meteo base URLs via properties or environment variables
- **So that** I can target different environments or mocks without code changes

### Acceptance Criteria

- [ ] The system SHALL expose properties `cli.endpoints.ip-geo-base-url` and `cli.endpoints.open-meteo-base-url` that bind to a typed configuration bean as URI values.
- [ ] WHEN no overrides are provided, the system SHALL use defaults:
  - `http://ip-api.com/json`
  - `https://api.open-meteo.com/v1/forecast`
- [ ] IF an invalid URI value is provided for either property, THEN the application SHALL fail fast at startup with a validation error.
- [ ] WHERE the properties are provided via environment variables or application properties, the system SHALL honor them consistently across all beans.

## User Story 2

- **As a** developer of integration features
- **I want to** access the configured endpoint URIs from a typed configuration class
- **So that** service clients can reliably build requests without duplicating constants

### Acceptance Criteria

- [ ] The configuration SHALL be exposed via a `@ConfigurationProperties` class `CliProperties` with a nested `endpoints` section containing `ipGeoBaseUrl` and `openMeteoBaseUrl` getters.
- [ ] WHEN other beans request `CliProperties` from the application context, the bound values SHALL be available and validated.

> End of Feature Specification for F2.2, last updated 2025-08-28.
