---
description: 'Test Notes for F2.2 External endpoints configuration'
---

# F2.2 Test Notes

Status: ✅ PASSED
Date: 2025-08-28

## Scope

Validate environment-driven configuration for external endpoints (ip-api, Open‑Meteo):
- Defaults are applied when no overrides are present
- Overrides via properties bind correctly
- Invalid URIs fail fast at startup via bean validation

## Tests Implemented

- CliPropertiesTest
  - defaults_areApplied_whenNoOverrides: Asserts default network timeouts and default endpoint URIs
  - overrides_bindFromProperties: Asserts property binding for overridden values including endpoint URIs
  - invalidEndpointUri_failValidation: Asserts context fails to start when endpoints contain invalid URIs
  - negativeTimeouts_failValidation: Asserts validation on timeouts

These tests already existed as part of F1.3 and now cover F2.2 acceptance criteria fully.

## Observations

- Spring Boot relaxed binding supports environment variables `CLI_ENDPOINTS_IP_GEO_BASE_URL` and `CLI_ENDPOINTS_OPEN_METEO_BASE_URL` mapping to the kebab-case properties.
- Endpoints are exposed as `URI` types in `CliProperties.Endpoints` and annotated with `@NotNull`, ensuring fail-fast behavior on invalid values.
- `application.properties` contains safe defaults matching the spec.

## Conclusion

F2.2 meets all acceptance criteria and is verified by passing unit tests.

> End of Test Notes for F2.2.
