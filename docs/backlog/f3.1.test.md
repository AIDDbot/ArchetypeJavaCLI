---
description: 'Test Notes for F3.1 Resolve location via IP (ip-api.com)'
---

# F3.1 Test Notes

Status: âœ… PASSED
Date: 2025-08-28

## Scope

Validate IP Geolocation client behavior when `weather` runs without coordinates:
- Success path: valid JSON with status=success and coordinates
- Failure status: status!=success carries message and maps to NETWORK
- Invalid payload: missing lat/lon maps to UNKNOWN
- HTTP error: non-2xx responses map to NETWORK

## Tests Implemented

- IpGeoClientIntegrationTest
  - resolve_success_returnsCoordinates: Mocks ip-api with Reactor Netty server; asserts lat/lon parsed
  - resolve_failureStatus_throwsNetworkCodedException: status=fail -> CodedException ExitCodes.NETWORK
  - resolve_invalidPayload_throwsUnknownCodedException: missing coordinates -> ExitCodes.UNKNOWN
  - resolve_httpError_throwsNetworkCodedException: 500 status -> ExitCodes.NETWORK

## Observations

- Uses the shared WebClient bean; default headers/timeouts validated by F2.1 tests.
- Endpoint base URL overridden per test to point to ephemeral local server.
- Minimal JSON mapping via IpGeoResponse remains sufficient for our needs.

## Conclusion

F3.1 meets all acceptance criteria and is verified by passing integration tests.

> End of Test Notes for F3.1.
