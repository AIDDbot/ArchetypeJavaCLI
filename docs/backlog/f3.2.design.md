# F3.2 Design — Fetch current weather from Open‑Meteo

## Goal

Provide a small client to call Open‑Meteo and map the response to a `WeatherObservation` used by the CLI to render results.

## Components

- OpenMeteoClient (`com.aiddbot.archetype.cli.integrations.openmeteo.OpenMeteoClient`)
  - Uses injected `WebClient` and `CliProperties` for base URL.
  - Exposes `WeatherObservation fetchCurrent(double lat, double lon)`.

- Domain model: `WeatherObservation` with at least temperature (C), windSpeed (m/s), and weatherCode (int).

## Interaction

1. Caller invokes `OpenMeteoClient.fetchCurrent(lat, lon)`.
2. Client calls `${openMeteoBaseUrl}?latitude={lat}&longitude={lon}&current_weather=true`.
3. Map `current_weather` object of the JSON to `WeatherObservation`.
4. On HTTP/network errors, throw `CodedException(ExitCodes.NETWORK, ...)`.

## Data shapes

- Expected minimal JSON: {
  "current_weather": { "temperature": number, "windspeed": number, "weathercode": number }
}

## Notes

- Keep mapping explicit with a small DTO mirroring the `current_weather` object.
- No retries or caching at this stage.
