---
description: "Test notes for F1.1 Project bootstrap (Maven + Spring Boot + Spring Shell)"
---

# F1.1 Test Notes

This feature provides the foundational project bootstrap with comprehensive testing infrastructure.

## Scope

- Build uses Java 21 and enforces it via Maven Enforcer/Toolchains when available.
- Application starts in non‑web mode and opens a Spring Shell interactive prompt.
- Basic metadata is available: `spring.application.name` and version logged on startup.
- **NEW**: Comprehensive testing infrastructure with unit and integration tests.

## Testing Infrastructure Added

### Unit Tests (`ArchetypeJavaCliApplicationUnitTest`)
- **Technology**: JUnit 5 + Mockito
- **Speed**: ~1-2 seconds
- **Coverage**: Tests individual methods in isolation
- **Features**:
  - Tests version resolution logic (BuildProperties vs fallback)
  - Tests startup logging configuration
  - Uses mocks to avoid Spring context startup
  - Comprehensive logging for debugging

### Integration Tests (`ArchetypeJavaCliApplicationTest`)
- **Technology**: `@SpringBootTest` with Shell excluded
- **Speed**: ~5-10 seconds  
- **Coverage**: Full Spring context loading
- **Features**:
  - Verifies complete application startup
  - Spring Shell disabled for testing (prevents hanging)
  - Tests real Spring Bean wiring

### Maven Configuration Enhancements
- Explicit Mockito dependencies for clarity
- Surefire plugin configured to disable Shell in tests
- Support for running specific test types:
  - `mvn test -Dtest=*UnitTest` (fast)
  - `mvn test -Dtest=*Test -Dtest=!*UnitTest` (integration)

## Manual Smoke Steps

1. Ensure JDK 21 is available (or a toolchain is configured).
2. Start the app with the Maven Boot run goal.
3. Observe:
   - Console shows detailed startup logging with configuration details
   - A log line like: `archetype-java-cli v<version> ready`.
   - An interactive Spring Shell prompt appears.
   - Built‑in commands (e.g., `help`) respond; `exit` quits the shell.

## Automated Test Results

### Unit Tests
- **Status**: ✅ PASSED
- **Tests**: 3 test methods
- **Coverage**: 
  - ✅ `logStartup()` method creation
  - ✅ Version resolution with BuildProperties
  - ✅ Fallback to 'dev' version
- **Execution Time**: ~1.4 seconds

### Integration Tests  
- **Status**: ✅ PASSED
- **Tests**: 1 context loading test
- **Coverage**: Full Spring application context startup
- **Execution Time**: ~5-8 seconds

## Result

- **Status**: ✅ PASSED (automated + manual verification)
- **Date**: 2025‑08‑28
- **Test Strategy**: Dual approach (unit + integration tests)
- **Performance**: Fast unit tests for development, comprehensive integration tests for CI/CD
